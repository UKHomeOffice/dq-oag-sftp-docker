FROM centos:centos7

ARG OAG_RDS_HOST
ARG OAG_RDS_DATABASE
ARG OAG_RDS_USERNAME
ARG OAG_RDS_PASSWORD
ARG OAG_RDS_TABLE

ENV RDS_HOST=$OAG_RDS_HOST
ENV RDS_DATABASE=$OAG_RDS_DATABASE
ENV RDS_USERNAME=$OAG_RDS_USERNAME
ENV PGPASSWORD=$OAG_RDS_PASSWORD
ENV RDS_TABLE=$OAG_RDS_TABLE

RUN yum install postgresql-server -y

CMD psql -h $RDS_HOST -p 5432 -d $RDS_DATABASE -U $RDS_USERNAME -c "CREATE TABLE $RDS_TABLE(filename VARCHAR(50) UNIQUE NOT NULL)"
